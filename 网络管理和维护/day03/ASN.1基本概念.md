# ASN.1基本概念

## OID的剩余内容

## NULL(空类型)

## 构造类型

由两种以上的成分构成的构造类型

- SEQUENCE 和 SEQUENCE OF 序列
- SET 和 SET OF 集合

- SEQUENCE 序列类型
  - 各元素属于同一数据类型
  - 由元素名称和元素类型组成
  - 类似于C语言的struct
  - 值可省略元素名
- SEQUENCE OF 单纯序列类型
- SET 集合类型,无序
  - 各元素可以属于不同数据类型
- SET OF

- 修饰关键字
  - OPTIONAL
  - DEFAULT
  - COMONENTS OF

## 其他类型

没有标签的类型,当这种类型的变量被赋值是,它们的类型和标签才确定.

- CHOICE
  - 选择类型,包含一个可供选择的数据类型
  - 仅其中一个类型可以被采用,产生一个值
  - 类似于C语言中的共用体(union)
  - 没有缺省的UNIVERSAL Tag值
- ANY
  - 表示任意类型的任意值
  - 定义时,不能确定数据的类型选择范围,可以使用ANY
  - ANY类型可以被任何ASN.1类型替换

## 标签类型

已知类型定义的新类型  
利用已有的类型定义类型时,除了类型名和原类型不同以外,其tag,出书编码都会继承原类型的  
Tag是区分类型的关键所在,**不论类型符号形式如何定义,如果他们的tag相同,则认为是同一种类型**  
编码前可以区分,编码后无法区分.  
通过标签类型的定义来区分编码后的内容.,即利用已有的类型定义新类型时,要**为新类型分配新的tag**,从而定义成标签类型.  
加上新tag后的类型,虽然和原来的类型在结构上时一样的,但是可以认为是个不同的类型  
类型定义的语法: <类型名> ::= <已有类型符号>  
**标签类型的定义**的基本语法: <类型名> ::= [[class]number] <已有类型符号>

- 标签类型的定义方法
  - 隐式(IMPLICIT方法
  - 显式(EXPLICIT方法
  - IMPLICIT更常用
- 隐式标签的定义时用新tag替换原tag
- 显示标签的定义时在一个原类型的tag上增加一个新tag

- 上下文专用类CONTEXT-SPECIFIC
  - 该标签主要用于消除歧义
  - 是对SEQUENCE,SET和CHOICE及其成员使用的,可以在描述中自己定义.
  - 只要不产生歧义,相同的标签号可以在不同结构中反复使用

总结,有两种情况需要给一个现有的类型加上tag:

- 一个类型有多个类型名,如为了使语义更丰富
- 避免混淆

## 子类型

- 在已有类型基础上添加约束,衍生出子类型
- 如果类型A的值集合时另一个类型B的值的集合,那么称类型A是类型B的子类型,类型B是类型A的父类型
- 产生子类型的6种方法
  - 单个值(单值约束)
  - 包含子类型
  - 值区间(值域约束)
    - 在SAN.1中使用`..`表示区间,`<`用来限定边界
  - 可用字符(字符表约束)
    - 可用字符: 只能用于字符串类型,用来限制可使用的字符集
  - 限制大小(大小约束)
    - 可以对5种类型限制其大小,比如比特串,字节串或字符串的长度,集合或序列里元素(同类型)的个数等
  - 内部子类型(成员约束)
- 类型拓展——在约束中也可以添加拓展标记

