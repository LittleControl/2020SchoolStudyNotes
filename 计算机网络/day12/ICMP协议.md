# ICMP协议

- 网际控制报文协议ICMP
- ICMP协议支持主机或路由器
- 差错(或异常)报告,(网络探询) -> 发送特定ICMP报文

## ICMP差错报文

- 终点不可达
- 源点抑制
- 时间超过
- 参数问题
- 改变路由(重定向)

不应发送ICMP差错报文的情况

- 对ICMP差错报告报文不再发送ICMP差错报告报文
- 对第一个分片的数据报文的所有后续数据报片都不发送ICMP差错报告报文(只对第一个分片发送)
- 对具有组播地址的数据报都不发送ICMP差错报告报文
- 对具有特殊地址(127.0.0.1, 0.0.0.0等等)的数据报不发送ICMP差错报告报文

## ICMP询问报文

- 回送请求和回答报文, 测试目的站是否可达以及了解其相关状态
- 时间戳和回答报文, 用来进行时钟同步和测量时间
- 掩码地址请求和回答报文(不再使用)
- 路由器询问和通告报文(不再使用)

应用

- PING, 使用ICMP回送请求和回答报文
- Traceroute, 使用ICMP时间超过差错报告报文
