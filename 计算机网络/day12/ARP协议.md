# ARP协议

## 发送数据的过程

- 应用层->传输层->网络层->数据链路层->物理层
- ARP高速缓存(IP地址与MAC地址的映射)
- 广播ARP请求分组
- 单播ARP响应分组

## ARP协议特点

- 由于在实际网络的链路上传送数据帧时,最终必须使用MAC地址
- ARP协议: 完成主机或路由器IP地址到MAC地址的映射(解决下一跳走哪的问题)

ARP协议使用过程

- 检查ARP高速缓存,有对应表项则写入MAC帧
- 没有则用目的MAC地址为FF-FF-FF-FF-FF-FF的帧封装并广播ARP请求分组, 同一局域网所有主机都能收到该请求
- 目的主机收到请求后单播一个ARP响应分组
- 源主机收到响应分组后写入ARP缓存(大概10~20min更新一次)

ARP协议4种典型情况

- 主机A发给本网络上的主机B: 用ARP找到主机B的硬件地址
- 主机A发给另一个网络上的主机B: 用ARP找到本网络上一个路由器(网关)的硬件地址
- 路由器发送给本网络的主机A: 用ARP找到主机A的硬件地址
- 路由器发给另一网络的主机B: 用ARP找到本网络上的另一个路由器的硬件地址

ARP协议自动进行
