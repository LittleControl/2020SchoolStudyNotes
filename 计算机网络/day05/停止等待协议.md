# 停止等待协议

- 为什么要有停止等待协议
- 研究停等协议的前提
- 应用情况

## 无差错情况

ACK确认帧

## 有差错情况

- 数据帧丢失或检测到帧出错
  - 超时计时器: 每次发送一个帧就启动一个计时器
  - 超时计时器设置的重传时间应当比帧传输的平均RTT更长一些
  - 发送一个帧后,必须保留它的副本
  - 数据帧和确认帧必须编号
- ACK丢失
  - 超时重传
  - 接收方丢弃重复帧,并重新发送ACK
- ACK迟到
  - 发送方丢弃

## 停等协议性能分析

优点: 简单  
缺点: 信道利用太低!  
信道利用率= T0

信道利用率: 发送方在一个发送周期内,有效地发送数据所需要的时间占整个发送周期的比率  
信道利用率= (L/C)/T  
L: T内发送L比特数据 C: 发送方数据速率 T: 发送周期,从开始发送数据,到收到第一个确认帧为止.  

信道吞吐率= 信道利用率*发送方的发送速率
