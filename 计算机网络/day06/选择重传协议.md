# 选择重传协议(SR)

## GBN协议的弊端

累计确认->批量重传

解决办法: 设置单个确认,同时加大接收窗口,设置接受缓存,缓存乱序到达的帧

## SR中的滑动窗口

- 缓存机制

## 发送方必须响应的三件事

- 上层的调用
- 收到了一个ACK
- 超时事件

## 接收方

来者不拒(窗口内的帧)  
SR接收方将确认一个正确接收的帧而不管其是否按序.失序的帧将被缓存,并返回给发送方一个该帧的确认帧.知道所有帧皆被收到为止.这时才可以将一批帧按序交付给上层,然后向前移动滑动窗口.  
如果收到了窗口序号外的帧,就返回一个ACK.其他情况,就忽略该帧.

## 滑动窗口长度

发送窗口最好等于接受窗口(大了会溢出,小了没意义)  
WTmax=WRmax=2的(n-1)次方,n: 编码个数

## ST协议重点总结

- 对数据帧逐一确认,收一个确认一个
- 只重传出错帧
- 接收方有缓存